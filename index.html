<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes">
    <title>TUFFE GLASSES ‚Äî —Å—Ç–∏–ª—å–Ω—ã–µ –æ—á–∫–∏ –∑–∞ 1500 —Å–æ–º</title>
    <link rel="icon" href="img/logo.png" type="icon">
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://api-maps.yandex.ru/2.1/?apikey=–≤–∞—à_–∫–ª—é—á&lang=ru_RU" type="text/javascript"></script>
    <meta name="google-site-verification" content="34wOhlYxT77lx4bWL8QBewnBjPPC1MIXYSb_aEowmHY" />
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="logo">TUFFE<span>GLASS</span></div>
            <nav class="nav" id="navMenu">
                <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="#catalog">–ö–∞—Ç–∞–ª–æ–≥</a>
                <a href="#about">–û –Ω–∞—Å</a>
                <a href="#delivery">–î–æ—Å—Ç–∞–≤–∫–∞</a>
                <a href="#contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
            </nav>
            <div class="header-actions">
    <!-- –ö–Ω–æ–ø–∫–∞ —Ç–µ–º—ã -->
    <button class="theme-toggle" id="themeToggle" title="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É" style="background: none; border: none; font-size: 24px; cursor: pointer; padding: 8px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--black);">üåô</button>
    
    <div class="cart-icon" id="cartIcon">
        üõí
        <span class="cart-count" id="cartCount">0</span>
    </div>
    <button class="btn btn-primary" onclick="document.querySelector('#catalog').scrollIntoView({behavior: 'smooth'})">–ö—É–ø–∏—Ç—å —Å–µ–π—á–∞—Å</button>
    <div class="burger" id="burger">
        <span></span>
        <span></span>
        <span></span>
    </div>
</div>
        </div>
    </header>
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <div class="timer">
                    ‚è≥ –°–∫–∏–¥–∫–∞ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑: <span id="timer">02:15:00</span>
                </div>
                <h1>–°—Ç–∏–ª—å–Ω—ã–µ –æ—á–∫–∏ –≤—Å–µ–≥–æ –∑–∞ 1500 —Å–æ–º</h1>
                <p>–ó–∞—â–∏—Ç–∞ UV400. –õ—ë–≥–∫–∏–µ. –ü—Ä–æ—á–Ω—ã–µ. –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–∞–∂–¥–æ–º—É.</p>
                <div class="hero-btns">
                    <button class="btn btn-primary" onclick="document.querySelector('#catalog').scrollIntoView({behavior: 'smooth'})">üî• –°–º–æ—Ç—Ä–µ—Ç—å –º–æ–¥–µ–ª–∏</button>
                    <button class="btn btn-outline" onclick="document.querySelector('#catalog').scrollIntoView({behavior: 'smooth'})">üõí –ö—É–ø–∏—Ç—å —Å–µ–π—á–∞—Å</button>
                </div>
            </div>
            <div class="hero-image">
                <img src="https://i.postimg.cc/VkNMpg9F/IMG-20260213-211036-283.jpg" alt="–°—Ç–∏–ª—å–Ω—ã–µ –æ—á–∫–∏">
            </div>
        </div>
    </section>
    <section id="catalog" class="section">
        <div style="margin-bottom: 30px; display: flex; gap: 15px; flex-wrap: wrap;">
    <input type="text" id="searchInput" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é..." style="flex: 1; min-width: 250px; padding: 12px 20px; border: 1px solid #ddd; border-radius: 60px; font-size: 16px;">
    
    <select id="filterSelect" style="padding: 12px 20px; border: 1px solid #ddd; border-radius: 60px; font-size: 16px; background: white; cursor: pointer;">
        <option value="all">–í—Å–µ –º–æ–¥–µ–ª–∏</option>
        <option value="hit">üî• –•–∏—Ç—ã</option>
        <option value="new">‚ú® –ù–æ–≤–∏–Ω–∫–∏</option>
    </select>
</div>
        <div class="container">
            <h2 class="section-title">üî• –•–∏—Ç—ã –ø—Ä–æ–¥–∞–∂</h2>
            <div class="catalog-grid" id="catalogGrid"></div>
        </div>
    </section>
    <section id="about" class="section">
        <div class="container features">
            <h2 style="font-size: 32px; font-weight: 700;">–ü–æ—á–µ–º—É –≤—ã–±–∏—Ä–∞—é—Ç –Ω–∞—Å</h2>
            <div class="features-grid">
                <div class="feature-item">
                    <div class="feature-icon">üõ°Ô∏è</div>
                    <div class="feature-title">UV400 –∑–∞—â–∏—Ç–∞</div>
                    <div class="feature-desc">100% –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —É–ª—å—Ç—Ä–∞—Ñ–∏–æ–ª–µ—Ç–∞</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">üïäÔ∏è</div>
                    <div class="feature-title">–õ—ë–≥–∫–∏–π –≤–µ—Å</div>
                    <div class="feature-desc">–í—Å–µ–≥–æ 25 –≥—Ä–∞–º–º</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">üë´</div>
                    <div class="feature-title">–£–Ω–∏—Å–µ–∫—Å</div>
                    <div class="feature-desc">–ü–æ–¥—Ö–æ–¥—è—Ç –≤—Å–µ–º</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">‚ú®</div>
                    <div class="feature-title">–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω</div>
                    <div class="feature-desc">–¢—Ä–µ–Ω–¥—ã 2026</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">üí∞</div>
                    <div class="feature-title">–î–æ—Å—Ç—É–ø–Ω–∞—è —Ü–µ–Ω–∞</div>
                    <div class="feature-desc">–ë–µ–∑ –Ω–∞—Ü–µ–Ω–æ–∫</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">üöö</div>
                    <div class="feature-title">–ë—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞</div>
                    <div class="feature-desc">–ü–æ –ë–∏—à–∫–µ–∫—É –∑–∞ 2 —á–∞—Å–∞</div>
                </div>
            </div>
        </div>
    </section>
    <section class="section">
        <div class="container">
            <div class="price-compare">
                <div>
                    <h2>–ü–æ—á–µ–º—É —É –Ω–∞—Å –≤—Å–µ–≥–æ 1500 —Å–æ–º?</h2>
                    <p>–ú—ã —Ä–∞–±–æ—Ç–∞–µ–º –Ω–∞–ø—Ä—è–º—É—é –±–µ–∑ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤. –ù–µ—Ç –ø–µ—Ä–µ–ø–ª–∞—Ç—ã –∑–∞ –±—Ä–µ–Ω–¥. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —Ä–µ–∫–ª–∞–º—É. –ü—Ä—è–º—ã–µ –ø–æ—Å—Ç–∞–≤–∫–∏.</p>
                </div>
                <div class="compare-numbers">
                    <span class="compare-old">2000 —Å–æ–º</span>
                    <span class="compare-new">1500 —Å–æ–º</span>
                </div>
            </div>
        </div>
    </section>
    <section class="section">
        <div class="container">
            <h2 class="section-title">–û—Ç–∑—ã–≤—ã –Ω–∞—à–∏—Ö –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π</h2>
            <div class="reviews-grid">
                <div class="review-card">
                    <div class="review-text">¬´–ó–∞–∫–∞–∑—ã–≤–∞–ª–∞ —É–∂–µ –≤—Ç–æ—Ä—ã–µ. –û—á–µ–Ω—å —Å—Ç–∏–ª—å–Ω—ã–µ, –Ω–µ–≤–µ—Å–æ–º—ã–µ, —Ä–µ–∞–ª—å–Ω–æ –∑–∞—â–∏—â–∞—é—Ç –æ—Ç —Å–æ–ª–Ω—Ü–∞. –î–æ—Å—Ç–∞–≤–∫–∞ –±—ã—Å—Ç—Ä–∞—è.¬ª</div>
                    <div class="review-author">‚Äî –ê–π–∂–∞–Ω</div>
                </div>
                <div class="review-card">
                    <div class="review-text">¬´–ó–∞ —Ç–∞–∫—É—é —Ü–µ–Ω—É ‚Äî –ø—Ä–æ—Å—Ç–æ –ø–æ–¥–∞—Ä–æ–∫. –í –º–∞–≥–∞–∑–∏–Ω–∞—Ö —Ç–∞–∫–∏–µ –∂–µ –ø–æ 2000 —Å–æ–º. –¢–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ —Ç—É—Ç.¬ª</div>
                    <div class="review-author">‚Äî –ë–µ–∫—Ç—É—Ä</div>
                </div>
                <div class="review-card">
                    <div class="review-text">¬´–£–¥–æ–±–Ω–æ, —á—Ç–æ –º–æ–∂–Ω–æ —Å–∞–º–æ–≤—ã–≤–æ–∑–æ–º –∑–∞–±—Ä–∞—Ç—å –ø—Ä—è–º–æ —É –ø–∞—Ä–∫–∞ –ë–∞–π—Ç–∏–∫. –í–µ–∂–ª–∏–≤—ã–π –ø–µ—Ä—Å–æ–Ω–∞–ª.¬ª</div>
                    <div class="review-author">‚Äî –ñ–∞–Ω–µ–ª—è</div>
                </div>
            </div>
        </div>
    </section>
    <footer class="footer" id="contacts">
        <div class="container">
            <div>
                <div class="footer-logo">TUFFE<span style="color: var(--accent);">GLASS</span></div>
                <p style="color: #ccc; margin-bottom: 20px;">–°—Ç–∏–ª—å–Ω—ã–µ –æ—á–∫–∏ –ø–æ —á–µ—Å—Ç–Ω–æ–π —Ü–µ–Ω–µ. –ë–∏—à–∫–µ–∫.</p>
                <div class="footer-social">
                    <a href="tel:996558140610">üì∑</a>
                    <a href="tel:996558140610">üì±</a>
                    <a href="tel:996558140610">üí¨</a>
                </div>
            </div>
            <div class="footer-links">
                <h4 style="margin-bottom: 20px;">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h4>
                <a href="#">–û –Ω–∞—Å</a>
                <a href="#">–î–æ—Å—Ç–∞–≤–∫–∞</a>
                <a href="#">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
            </div>
            <div class="footer-links">
                <h4 style="margin-bottom: 20px;">–ö–∞—Ç–∞–ª–æ–≥</h4>
                <a href="#catalog">–ú—É–∂—Å–∫–∏–µ</a>
                <a href="#catalog">–ñ–µ–Ω—Å–∫–∏–µ</a>
                <a href="#catalog">–£–Ω–∏—Å–µ–∫—Å</a>
            </div>
            <div class="footer-links">
                <h4 style="margin-bottom: 20px;">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h4>
                <a href="tel:+996700123456">+996 700 12 34 56</a>
                <a href="https://www.instagram.com/tuffe.kg?igsh=aHEyOGExZ3I4ajYy">Instagram</a>
                <a href="tel:+996700123456">WhatsApp</a>
            </div>
        </div>
        <div class="container" style="margin-top: 40px; text-align: center; color: #888; border-top: 1px solid #222; padding-top: 30px;">
            ¬© 2026 TUFFEGLASS. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
        </div>
    </footer>
    <div id="productModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeProductModal">&times;</span>
            <div id="productDetailContent"></div>
        </div>
    </div>
    <div id="cartModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeCartModal">&times;</span>
            <h2 style="font-size: 28px; margin-bottom: 20px;">–ö–æ—Ä–∑–∏–Ω–∞</h2>
            <div id="cartItemsContainer"></div>
            <div id="cartTotal" class="cart-total"></div>
            <button class="btn btn-primary" id="checkoutBtn" style="width: 100%; margin-top: 20px;">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
        </div>
    </div>
<div id="checkoutModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" id="closeCheckoutModal">&times;</span>
        <h2 style="font-size: 28px; margin-bottom: 20px;">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
        <div class="radio-group">
            <label>
                <input type="radio" name="deliveryType" value="pickup" checked> –°–∞–º–æ–≤—ã–≤–æ–∑ (0 —Å–æ–º)
            </label>
            <label>
                <input type="radio" name="deliveryType" value="delivery"> –î–æ—Å—Ç–∞–≤–∫–∞ (150 —Å–æ–º)
            </label>
        </div>
        <div id="pickupBlock">
            <p style="margin-bottom: 16px;"><strong>üìç –ü–∞—Ä–∫ –ë–∞–π—Ç–∏–∫, –°–æ–≤–µ—Ç—Å–∫–∞—è –º–∞–≥–∏—Å—Ç—Ä–∞–ª—å, –ë–∏—à–∫–µ–∫</strong></p>
            <div id="mapContainer" class="pickup-map" style="width:100%; height:250px; background:#eaeef2; border-radius:16px;"></div>
            <p style="margin: 16px 0;">üìû –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä: +996 700 12 34 56</p>
            <button class="btn btn-primary" id="confirmPickupBtn" style="width: 100%;">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑ (—Å–∞–º–æ–≤—ã–≤–æ–∑)</button>
        </div>
        <div id="deliveryBlock" style="display: none;">
            <form id="deliveryForm" class="delivery-form">
                <input type="text" placeholder="–ò–º—è" required>
                <input type="tel" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" required>
                <input type="text" placeholder="–ê–¥—Ä–µ—Å" required>
                <textarea placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π" rows="3"></textarea>
                <button type="submit" class="btn btn-primary" style="width: 100%;">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑ (–¥–æ—Å—Ç–∞–≤–∫–∞ 150 —Å–æ–º)</button>
            </form>
        </div>
    </div>
</div>
<div id="contactModal" class="modal">
    <div class="modal-content" style="max-width: 450px; text-align: center;">
        <span class="close-modal" id="closeContactModal">&times;</span>
        <h2 style="font-size: 28px; margin-bottom: 10px;">‚úÖ –ó–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç!</h2>
        <p style="margin-bottom: 20px; color: #666;">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± —Å–≤—è–∑–∏, —á—Ç–æ–±—ã –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</p>
        
        <div style="display: flex; flex-direction: column; gap: 15px; margin: 30px 0;">
            <a href="tel:0558140610" style="display: flex; align-items: center; justify-content: center; gap: 12px; background: #0a0a0a; color: white; padding: 16px; border-radius: 60px; text-decoration: none; font-weight: 600; font-size: 18px; transition: 0.2s;">
                <span style="font-size: 24px;">üìû</span> –ü–æ–∑–≤–æ–Ω–∏—Ç—å: 0558 140 610
            </a>
                        <button id="whatsappOrderBtn" style="display: flex; align-items: center; justify-content: center; gap: 12px; background: #25D366; color: white; padding: 16px; border-radius: 60px; border: none; font-weight: 600; font-size: 18px; cursor: pointer; transition: 0.2s;">
                <span style="font-size: 24px;">üí¨</span> –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ WhatsApp
            </button>
        </div>
        
        <p style="font-size: 14px; color: #999;">–ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è</p>
    </div>
</div>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        
        function getWhatsAppMessage() {
            let message = "üï∂Ô∏è *–ù–æ–≤—ã–π –∑–∞–∫–∞–∑!*\n\n";
            message += "*–¢–æ–≤–∞—Ä—ã:*\n";
            
            cart.forEach(item => {
                message += `‚Ä¢ ${item.name} ‚Äî ${item.quantity} —à—Ç. = ${item.price * item.quantity} —Å–æ–º\n`;
            });
            
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            message += `\n*–ò—Ç–æ–≥–æ:* ${total} —Å–æ–º\n`;
            
            const deliveryType = document.querySelector('input[name="deliveryType"]:checked');
            if (deliveryType && deliveryType.value === 'pickup') {
                message += "\n*–°–∞–º–æ–≤—ã–≤–æ–∑:* –ü–∞—Ä–∫ –ë–∞–π—Ç–∏–∫";
            } else {
                const form = document.getElementById('deliveryForm');
                if (form) {
                    const name = form.querySelector('input[placeholder="–ò–º—è"]')?.value || '';
                    const phone = form.querySelector('input[placeholder="–¢–µ–ª–µ—Ñ–æ–Ω"]')?.value || '';
                    const address = form.querySelector('input[placeholder="–ê–¥—Ä–µ—Å"]')?.value || '';
                    const comment = form.querySelector('textarea')?.value || '';
                    
                    message += `\n*–î–æ—Å—Ç–∞–≤–∫–∞:* 150 —Å–æ–º`;
                    message += `\n*–ò–º—è:* ${name || '–Ω–µ —É–∫–∞–∑–∞–Ω–æ'}`;
                    message += `\n*–¢–µ–ª–µ—Ñ–æ–Ω:* ${phone || '–Ω–µ —É–∫–∞–∑–∞–Ω'}`;
                    message += `\n*–ê–¥—Ä–µ—Å:* ${address || '–Ω–µ —É–∫–∞–∑–∞–Ω'}`;
                    if (comment) message += `\n*–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:* ${comment}`;
                }
            }
            
            return encodeURIComponent(message);
        }

        const whatsappBtn = document.getElementById('whatsappOrderBtn');
        if (whatsappBtn) {
            whatsappBtn.addEventListener('click', function() {
                const phone = '996558140610';
                const message = getWhatsAppMessage();
                window.open(`https://wa.me/${phone}?text=${message}`, '_blank');
                
                cart = [];
                saveCart();
                
                document.getElementById('contactModal')?.classList.remove('active');
                document.getElementById('checkoutModal')?.classList.remove('active');
                document.getElementById('cartModal')?.classList.remove('active');
            });
        }

        const pickupBtn = document.getElementById('confirmPickupBtn');
        if (pickupBtn) {
            pickupBtn.addEventListener('click', function() {
                if (cart.length === 0) {
                    alert('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞');
                    return;
                }
                document.getElementById('checkoutModal')?.classList.remove('active');
                document.getElementById('contactModal')?.classList.add('active');
            });
        }

        const deliveryForm = document.getElementById('deliveryForm');
        if (deliveryForm) {
            deliveryForm.addEventListener('submit', function(e) {
                e.preventDefault();
                if (cart.length === 0) {
                    alert('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞');
                    return;
                }
                document.getElementById('checkoutModal')?.classList.remove('active');
                document.getElementById('contactModal')?.classList.add('active');
            });
        }

        const closeContactBtn = document.getElementById('closeContactModal');
        if (closeContactBtn) {
            closeContactBtn.addEventListener('click', function() {
                document.getElementById('contactModal')?.classList.remove('active');
            });
        }
    });
</script>
    <script>
const products = [
    {
        id: 1,
        name: 'C24',
        desc: '–ö–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ, –ø–æ–ª—è—Ä–∏–∑–∞—Ü–∏—è, UV400',
        price: 1500,
        image: 'https://i.ibb.co/wFnWt6Pg/C24-e67a56ff-ba85-47da-bdff-a45fb3294290.jpg',
        badge: '–ù–æ–≤–∏–Ω–∫–∞',
        images: [],
        specs: 'PC –æ–ø—Ä–∞–≤–∞, TAC –ª–∏–Ω–∑—ã, 100+ —Ü–≤–µ—Ç–æ–≤ –≤ –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–µ.'
    },
    {
        id: 2,
        name: 'C10',
        desc: '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω, —É–Ω–∏—Å–µ–∫—Å',
        price: 1500,
        image: 'https://i.ibb.co/J4HrkqT/C10-1fb676c7-abff-42c8-aa72-588e9d378b1e.jpg',
        badge: '',
        images: [],
        specs: 'UV400, –ª—ë–≥–∫–∞—è –æ–ø—Ä–∞–≤–∞, –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π –Ω–æ—Å–∫–∏.'
    },
    {
        id: 3,
        name: 'C4',
        desc: '–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π —Å—Ç–∏–ª—å, –∑–µ—Ä–∫–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∑—ã',
        price: 1500,
        image: 'https://i.ibb.co/mCyw4sxn/C4-79475673-8ac1-42ff-8bb8-e36bd49dbc05.jpg',
        badge: '–•–∏—Ç',
        images: [],
        specs: '–ü–æ–ª—è—Ä–∏–∑–∞—Ü–∏—è, –∑–∞—â–∏—Ç–∞ –æ—Ç –±–ª–∏–∫–æ–≤, —É–¥–∞—Ä–æ–ø—Ä–æ—á–Ω—ã–µ.'
    },
    {
        id: 4,
        name: 'C12',
        desc: '–ú–∏–Ω–∏–º–∞–ª–∏–∑–º, —Ç–æ–Ω–∫–∞—è –æ–ø—Ä–∞–≤–∞',
        price: 1500,
        image: 'https://i.ibb.co/fYvV3vdp/C12-d503ae9e-290b-4ef3-9c6c-d00f2a907090.jpg',
        badge: '',
        images: [],
        specs: 'UV400, —Å—É–ø–µ—Ä–ª—ë–≥–∫–∏–µ, –Ω–µ–≤–µ—Å–æ–º—ã–µ –Ω–∞ –ª–∏—Ü–µ.'
    },
    {
        id: 5,
        name: 'C3',
        desc: '–†–µ—Ç—Ä–æ-—Å—Ç–∏–ª—å, –∫—Ä—É–≥–ª—ã–µ',
        price: 1500,
        image: 'https://i.ibb.co/HfdMxNnk/C3-5df86c56-4c43-4c1b-81e3-6776af4580d0.jpg',
        badge: '',
        images: [],
        specs: '–ê—Ü–µ—Ç–∞—Ç–Ω–∞—è –æ–ø—Ä–∞–≤–∞, UV400, —Å—Ç–∏–ª—å —É–Ω–∏—Å–µ–∫—Å.'
    },
    {
        id: 6,
        name: 'C2',
        desc: '–ö–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ, –º–∞—Ç–æ–≤—ã–µ',
        price: 1500,
        image: 'https://i.ibb.co/WNW63KLp/C2-b6ab5842-e99c-4eb9-af4f-76375bc8cbc0.jpg',
        badge: '',
        images: [],
        specs: '–ü–æ–ª—è—Ä–∏–∑–∞—Ü–∏—è, –Ω–µ—Å–∫–æ–ª—å–∑—è—â–∏–µ –¥—É–∂–∫–∏.'
    },
    {
        id: 7,
        name: 'C1',
        desc: '–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∫–ª–∞—Å—Å–∏–∫–∞ (–ø–µ—Ä–µ–¥/–∑–∞–¥)',
        price: 1500,
        image: 'https://i.ibb.co/gMKwKB9p/C1-5d8d0a10-687f-407a-a05f-b89498289d84.jpg',
        badge: '–•–∏—Ç',
        images: [
            'https://i.ibb.co/zWnxnkjv/19-5e200cd7-d8c8-4620-930f-265b2a461b4d.jpg' 
        ],
        specs: '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —Ñ–æ—Ä–º–∞, –¥–≤–∞ —Ä–∞–∫—É—Ä—Å–∞ –≤ –æ–¥–Ω–æ–π –º–æ–¥–µ–ª–∏.'
    },
    {
        id: 8,
        name: '19',
        desc: '–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ, –¥–≤–∞ –≤–∏–¥–∞',
        price: 1500,
        image: 'https://i.ibb.co/1GfKZsSw/2.jpg',
        badge: '–ù–æ–≤–∏–Ω–∫–∞',
        images: [
            'https://i.ibb.co/9mVNyTxf/20.jpg' 
        ],
        specs: '–î–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –¥–∏–∑–∞–π–Ω–∞: –ø–µ—Ä–µ–¥/–∑–∞–¥. –ü–æ–ª—è—Ä–∏–∑–∞—Ü–∏—è, UV400.'
    }
];

        let cart = JSON.parse(localStorage.getItem('styleglassCart')) || [];

        function saveCart() {
            localStorage.setItem('styleglassCart', JSON.stringify(cart));
            updateCartCount();
            renderCartItems();
        }

        function updateCartCount() {
            const count = cart.reduce((acc, item) => acc + item.quantity, 0);
            document.getElementById('cartCount').innerText = count;
        }

        function addToCart(productId) {
    const product = products.find(p => p.id === productId);
    if (!product) return;
    
    const existing = cart.find(item => item.id === productId);
    if (existing) {
        existing.quantity += 1;
    } else {
        cart.push({ 
            id: product.id,
            name: product.name,
            desc: product.desc,
            price: product.price,
            image: product.image,
            quantity: 1 
        });
    }
    saveCart();
    
    showNotification('‚úÖ –¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!');
}
        function clearCart() {
            if (cart.length === 0) {
                showNotification('‚ùå –ö–æ—Ä–∑–∏–Ω–∞ —É–∂–µ –ø—É—Å—Ç–∞');
                return;
            }
            
            cart = [];
            saveCart();
            renderCartItems();
            showNotification('üóëÔ∏è –ö–æ—Ä–∑–∏–Ω–∞ –æ—á–∏—â–µ–Ω–∞');
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            saveCart();
        }

        function renderCartItems() {
    const container = document.getElementById('cartItemsContainer');
    if (!container) return;
    
    if (cart.length === 0) {
        container.innerHTML = '<p style="text-align:center; padding:30px;">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>';
        document.getElementById('cartTotal').innerHTML = '';
        return;
    }
    
    let html = '';
    let total = 0;
    
    html += `
        <div style="display: flex; justify-content: flex-end; margin-bottom: 20px;">
            <button onclick="clearCart()" style="background: #fee2e2; color: #dc2626; border: none; padding: 8px 16px; border-radius: 40px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 8px; transition: 0.2s;">
                üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë
            </button>
        </div>
    `;
    
    cart.forEach(item => {
        total += item.price * item.quantity;
        html += `
            <div class="cart-item">
                <img src="${item.image}" class="cart-item-img" alt="${item.name}">
                <div class="cart-item-info">
                    <div class="cart-item-title">${item.name}</div>
                    <div style="font-size:14px; color:var(--gray);">${item.desc}</div>
                    <div class="cart-item-price">${item.price} —Å–æ–º x ${item.quantity}</div>
                </div>
                <div class="cart-item-remove" onclick="removeFromCart(${item.id})">–£–¥–∞–ª–∏—Ç—å</div>
            </div>
        `;
    });
    
    container.innerHTML = html;
    document.getElementById('cartTotal').innerHTML = `–ò—Ç–æ–≥–æ: ${total} —Å–æ–º`;
}
        function renderCatalog() {
    const grid = document.getElementById('catalogGrid');
    const searchTerm = document.getElementById('searchInput')?.value.toLowerCase() || '';
    const filterValue = document.getElementById('filterSelect')?.value || 'all';
    
    let filteredProducts = products.filter(p => {
        const matchesSearch = p.name.toLowerCase().includes(searchTerm) || 
                             p.desc.toLowerCase().includes(searchTerm);
        
        if (filterValue === 'hit') {
            return matchesSearch && p.badge === '–•–∏—Ç';
        } else if (filterValue === 'new') {
            return matchesSearch && p.badge === '–ù–æ–≤–∏–Ω–∫–∞';
        }
        return matchesSearch; 
    });
    
    if (filteredProducts.length === 0) {
        grid.innerHTML = '<p style="text-align:center; padding:40px; color:var(--gray);">üòï –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>';
        return;
    }
    
    grid.innerHTML = filteredProducts.map(p => `
        <div class="product-card" onclick="openProductModal(${p.id})">
            ${p.badge ? `<span class="badge">${p.badge}</span>` : ''}
            <img src="${p.image}" class="product-img" alt="${p.name}">
            <h3 class="product-title">${p.name}</h3>
            <p class="product-desc">${p.desc}</p>
            <div class="product-price">
                ${p.price} —Å–æ–º
            </div>
            <button class="btn-add" onclick="event.stopPropagation(); addToCart(${p.id})">üõí –•–æ—á—É –∫—É–ø–∏—Ç—å</button>
        </div>
    `).join('');
}

document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('searchInput');
    const filterSelect = document.getElementById('filterSelect');
    
    if (searchInput) {
        searchInput.addEventListener('input', renderCatalog);
    }
    
    if (filterSelect) {
        filterSelect.addEventListener('change', renderCatalog);
    }
});
        function openProductModal(id) {
    const product = products.find(p => p.id === id);
    const modal = document.getElementById('productModal');
    const detail = document.getElementById('productDetailContent');
    
    let imagesHtml = `<img src="${product.image}" id="mainProductImage" style="width:100%; border-radius:20px; margin-bottom:10px;">`;
    
    if (product.images && product.images.length > 0) {
        imagesHtml += '<div style="display:flex; gap:10px; margin-top:10px; flex-wrap:wrap;">';
        imagesHtml += `<img src="${product.image}" onclick="document.getElementById('mainProductImage').src='${product.image}'" style="width:70px; height:70px; object-fit:cover; border-radius:10px; cursor:pointer; border:2px solid transparent;" onmouseover="this.style.borderColor='#f97316'" onmouseout="this.style.borderColor='transparent'">`;
        product.images.forEach(img => {
            imagesHtml += `<img src="${img}" onclick="document.getElementById('mainProductImage').src='${img}'" style="width:70px; height:70px; object-fit:cover; border-radius:10px; cursor:pointer; border:2px solid transparent;" onmouseover="this.style.borderColor='#f97316'" onmouseout="this.style.borderColor='transparent'">`;
        });
        imagesHtml += '</div>';
    }
    
    detail.innerHTML = `
        <div style="display:grid; gap:20px;">
            ${imagesHtml}
            <h2 style="font-size:28px;">${product.name}</h2>
            <p>${product.desc}</p>
            <p><strong>–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:</strong> ${product.specs}</p>
            <div style="display:flex; gap:10px;">
                <span style="font-size:32px; font-weight:800;">${product.price} —Å–æ–º</span>
            </div>
            <button class="btn-add" onclick="addToCart(${product.id}); document.getElementById('productModal').classList.remove('active');">üõí –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
        </div>
    `;
    modal.classList.add('active');
}
        document.getElementById('burger').addEventListener('click', function() {
            document.getElementById('navMenu').classList.toggle('active');
        });

        function startTimer(hours) {
            let totalSeconds = hours * 3600;
            const timerEl = document.getElementById('timer');
            function tick() {
                if (totalSeconds <= 0) {
                    timerEl.innerText = '00:00:00';
                    return;
                }
                totalSeconds--;
                const h = Math.floor(totalSeconds / 3600);
                const m = Math.floor((totalSeconds % 3600) / 60);
                const s = totalSeconds % 60;
                timerEl.innerText = `${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
            }
            tick();
            setInterval(tick, 1000);
        }
        startTimer(2); 

        document.getElementById('cartIcon').addEventListener('click', function() {
            renderCartItems();
            document.getElementById('cartModal').classList.add('active');
        });

        document.getElementById('closeCartModal').addEventListener('click', function() {
            document.getElementById('cartModal').classList.remove('active');
        });

        document.getElementById('checkoutBtn').addEventListener('click', function() {
            document.getElementById('cartModal').classList.remove('active');
            document.getElementById('checkoutModal').classList.add('active');
            initMap(); 
        });

        const radios = document.querySelectorAll('input[name="deliveryType"]');
        radios.forEach(r => {
            r.addEventListener('change', function() {
                if (this.value === 'pickup') {
                    document.getElementById('pickupBlock').style.display = 'block';
                    document.getElementById('deliveryBlock').style.display = 'none';
                } else {
                    document.getElementById('pickupBlock').style.display = 'none';
                    document.getElementById('deliveryBlock').style.display = 'block';
                }
            });
        });

        document.getElementById('closeProductModal').addEventListener('click', function() {
            document.getElementById('productModal').classList.remove('active');
        });
        document.getElementById('closeCheckoutModal').addEventListener('click', function() {
            document.getElementById('checkoutModal').classList.remove('active');
        });

        function initMap() {
            if (typeof ymaps !== 'undefined') {
                ymaps.ready(function() {
                    var map = new ymaps.Map('mapContainer', {
                        center: [42.8746, 74.5698], 
                        zoom: 16
                    });
                    var placemark = new ymaps.Placemark([42.8746, 74.5698], {
                        hintContent: '–ü–∞—Ä–∫ –ë–∞–π—Ç–∏–∫',
                        balloonContent: '–ù–∞—à–∞ —Ç–æ—á–∫–∞ —Å–∞–º–æ–≤—ã–≤–æ–∑–∞'
                    });
                    map.geoObjects.add(placemark);
                });
            } else {
                document.getElementById('mapContainer').innerHTML = '<div style="background:#ddd; height:100%; display:flex; align-items:center; justify-content:center;">–ö–∞—Ä—Ç–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...</div>';
            }
        }

        renderCatalog();
        updateCartCount();
        window.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('active');
            }
        });
    </script>
    <script>
    //  –¢–Å–ú–ù–ê–Ø –¢–ï–ú–ê //
    const themeToggle = document.getElementById('themeToggle');
    const savedTheme = localStorage.getItem('theme');
    
    if (savedTheme === 'dark') {
        document.body.classList.add('dark-theme');
        themeToggle.textContent = '‚òÄÔ∏è';
    }
    
    themeToggle.addEventListener('click', function() {
        document.body.classList.toggle('dark-theme');
        
        if (document.body.classList.contains('dark-theme')) {
            localStorage.setItem('theme', 'dark');
            themeToggle.textContent = '‚òÄÔ∏è';
        } else {
            localStorage.setItem('theme', 'light');
            themeToggle.textContent = 'üåô';
        }
    });

    function showNotification(message) {
        const notification = document.createElement('div');
        notification.className = 'notification';
        notification.textContent = message;
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.remove();
        }, 3000);
    }

    const deliveryLink = document.querySelector('a[href="#delivery"]');
    if (deliveryLink) {
        deliveryLink.addEventListener('click', function(e) {
            e.preventDefault();
            
            if (cart.length === 0) {
                showNotification('‚ùå –£ –≤–∞—Å –Ω–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ. –°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –æ—á–∫–∏!');
            } else {
                const checkoutSection = document.getElementById('checkoutModal');
                if (checkoutSection) {
                    document.getElementById('cartModal')?.classList.remove('active');
                    document.getElementById('checkoutModal')?.classList.add('active');
                    initMap();
                    
                    setTimeout(() => {
                        document.querySelector('#checkoutModal .modal-content').scrollIntoView({
                            behavior: 'smooth',
                            block: 'center'
                        });
                    }, 300);
                }
            }
        });
    }

function showNotification(message) {
    const oldNotification = document.querySelector('.notification');
    if (oldNotification) {
        oldNotification.remove();
    }
    
    const notification = document.createElement('div');
    notification.className = 'notification';
    notification.textContent = message;
    document.body.appendChild(notification);
    

    setTimeout(() => {
        notification.remove();
    }, 3000);
}

// –æ—Ç–∑—ã–≤—ã //

const REVIEWS_STORAGE_KEY = 'tuffeGlassReviews';

let productReviews = JSON.parse(localStorage.getItem(REVIEWS_STORAGE_KEY)) || {};

products.forEach(product => {
    if (!productReviews[product.id]) {
        productReviews[product.id] = {
            averageRating: 0,
            totalRatings: 0,
            reviews: []
        };
    }
});

function saveReviews() {
    localStorage.setItem(REVIEWS_STORAGE_KEY, JSON.stringify(productReviews));
}

function updateAverageRating(productId) {
    const reviews = productReviews[productId].reviews;
    if (reviews.length === 0) {
        productReviews[productId].averageRating = 0;
        productReviews[productId].totalRatings = 0;
    } else {
        const total = reviews.reduce((sum, r) => sum + r.rating, 0);
        productReviews[productId].averageRating = total / reviews.length;
        productReviews[productId].totalRatings = reviews.length;
    }
    saveReviews();
}

function hasUserPurchased(productId) {
    return cart.some(item => item.id === productId);
}

function addReview(productId, rating, text) {
    if (!hasUserPurchased(productId)) {
        showNotification('‚ùå –í—ã –º–æ–∂–µ—Ç–µ –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏!');
        return false;
    }
    
    const review = {
        id: Date.now(),
        author: '–ü–æ–∫—É–ø–∞—Ç–µ–ª—å',
        date: new Date().toLocaleDateString('ru-RU'),
        rating: rating,
        text: text,
        likes: 0,
        dislikes: 0,
        userLiked: false,
        userDisliked: false
    };
    
    productReviews[productId].reviews.unshift(review);
    updateAverageRating(productId);
    showNotification('‚úÖ –°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –æ—Ç–∑—ã–≤!');
    return true;
}

function likeReview(productId, reviewId) {
    const review = productReviews[productId].reviews.find(r => r.id === reviewId);
    if (review) {
        if (review.userLiked) {
            review.likes--;
            review.userLiked = false;
        } else {
            review.likes++;
            review.userLiked = true;
            if (review.userDisliked) {
                review.dislikes--;
                review.userDisliked = false;
            }
        }
        saveReviews();
    }
}

function dislikeReview(productId, reviewId) {
    const review = productReviews[productId].reviews.find(r => r.id === reviewId);
    if (review) {
        if (review.userDisliked) {
            review.dislikes--;
            review.userDisliked = false;
        } else {
            review.dislikes++;
            review.userDisliked = true;
            if (review.userLiked) {
                review.likes--;
                review.userLiked = false;
            }
        }
        saveReviews();
    }
}

function renderStars(rating, interactive = false, productId = null, containerId = null) {
    let html = '<div class="stars-container">';
    for (let i = 1; i <= 5; i++) {
        if (interactive && productId && containerId) {
            html += `<span class="star ${i <= rating ? 'filled' : ''}" onclick="setRating(${productId}, ${i}, '${containerId}')">‚òÖ</span>`;
        } else {
            html += `<span class="star readonly ${i <= rating ? 'filled' : ''}">‚òÖ</span>`;
        }
    }
    html += '</div>';
    return html;
}

function setRating(productId, rating, containerId) {
    const container = document.getElementById(containerId);
    if (container) {
        container.innerHTML = renderStars(rating, true, productId, containerId);
        container.setAttribute('data-rating', rating);
    }
}

function openProductModal(id) {
    const product = products.find(p => p.id === id);
    const modal = document.getElementById('productModal');
    const detail = document.getElementById('productDetailContent');
    
    let imagesHtml = `<img src="${product.image}" id="mainProductImage" style="width:100%; border-radius:20px; margin-bottom:10px;">`;
    
    if (product.images && product.images.length > 0) {
        imagesHtml += '<div style="display:flex; gap:10px; margin-top:10px; flex-wrap:wrap;">';
        imagesHtml += `<img src="${product.image}" onclick="document.getElementById('mainProductImage').src='${product.image}'" style="width:70px; height:70px; object-fit:cover; border-radius:10px; cursor:pointer; border:2px solid transparent;" onmouseover="this.style.borderColor='#f97316'" onmouseout="this.style.borderColor='transparent'">`;
        product.images.forEach(img => {
            imagesHtml += `<img src="${img}" onclick="document.getElementById('mainProductImage').src='${img}'" style="width:70px; height:70px; object-fit:cover; border-radius:10px; cursor:pointer; border:2px solid transparent;" onmouseover="this.style.borderColor='#f97316'" onmouseout="this.style.borderColor='transparent'">`;
        });
        imagesHtml += '</div>';
    }
    
    const reviews = productReviews[product.id]?.reviews || [];
    const avgRating = productReviews[product.id]?.averageRating || 0;
    const totalRatings = productReviews[product.id]?.totalRatings || 0;
    
    let reviewsHtml = `
        <div class="product-reviews">
            <h3 style="font-size:18px; margin-bottom:10px;">–û—Ç–∑—ã–≤—ã –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π</h3>
            <div class="average-rating">
                <div class="rating-stars">
                    ${renderStars(Math.round(avgRating))}
                </div>
                <span class="rating-count">${totalRatings} ${totalRatings === 1 ? '–æ—Ç–∑—ã–≤' : totalRatings < 5 ? '–æ—Ç–∑—ã–≤–∞' : '–æ—Ç–∑—ã–≤–æ–≤'}</span>
            </div>
    `;
    
    if (reviews.length > 0) {
        reviewsHtml += '<div class="reviews-list">';
        reviews.forEach(review => {
            reviewsHtml += `
                <div class="review-item" id="review-${review.id}">
                    <div class="review-header">
                        <div class="review-author">
                            ${review.author}
                            <span class="review-author-badge">–ü–æ–∫—É–ø–∞—Ç–µ–ª—å</span>
                        </div>
                        <div class="review-date">${review.date}</div>
                    </div>
                    <div class="review-rating">
                        ${renderStars(review.rating)}
                    </div>
                    <div class="review-text">${review.text}</div>
                    <div class="review-actions">
                        <span class="review-like ${review.userLiked ? 'active' : ''}" onclick="likeReview(${product.id}, ${review.id})">
                            üëç ${review.likes || 0}
                        </span>
                        <span class="review-dislike ${review.userDisliked ? 'active' : ''}" onclick="dislikeReview(${product.id}, ${review.id})">
                            üëé ${review.dislikes || 0}
                        </span>
                    </div>
                </div>
            `;
        });
        reviewsHtml += '</div>';
    } else {
        reviewsHtml += '<p style="color:var(--gray); text-align:center; padding:20px;">–ü–æ–∫–∞ –Ω–µ—Ç –æ—Ç–∑—ã–≤–æ–≤. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!</p>';
    }
    
    const canReview = hasUserPurchased(product.id);
    const reviewFormId = `review-form-${product.id}`;
    const starsId = `stars-${product.id}`;
    
    reviewsHtml += `
        <div class="add-review-form">
            ${canReview ? `
                <button class="review-form-toggle" onclick="document.getElementById('${reviewFormId}').style.display='block'; this.style.display='none'">
                    ‚úçÔ∏è –ù–∞–ø–∏—Å–∞—Ç—å –æ—Ç–∑—ã–≤
                </button>
                <div id="${reviewFormId}" class="review-form" style="display:none;">
                    <div id="${starsId}" data-rating="5">
                        ${renderStars(5, true, product.id, starsId)}
                    </div>
                    <textarea id="review-text-${product.id}" placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–≤–æ—ë–º –æ–ø—ã—Ç–µ..." rows="3"></textarea>
                    <div class="review-form-actions">
                        <button class="review-submit-btn" onclick="submitReview(${product.id}, '${starsId}', 'review-text-${product.id}')">–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</button>
                        <button class="review-cancel-btn" onclick="document.getElementById('${reviewFormId}').style.display='none'; document.querySelector('.review-form-toggle').style.display='block'">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                </div>
            ` : `
                <p class="purchase-required">üí° –ö—É–ø–∏—Ç–µ —ç—Ç–æ—Ç —Ç–æ–≤–∞—Ä, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</p>
            `}
        </div>
    `;
    
    reviewsHtml += '</div>';
    
    detail.innerHTML = `
        <div style="display:grid; gap:20px;">
            ${imagesHtml}
            <h2 style="font-size:28px;">${product.name}</h2>
            <p>${product.desc}</p>
            <p><strong>–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:</strong> ${product.specs}</p>
            <div style="display:flex; gap:10px;">
                <span style="font-size:32px; font-weight:800;">${product.price} —Å–æ–º</span>
            </div>
            <button class="btn-add" onclick="addToCart(${product.id}); document.getElementById('productModal').classList.remove('active');">üõí –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
            ${reviewsHtml}
        </div>
    `;
    modal.classList.add('active');
}

function submitReview(productId, starsId, textareaId) {
    const starsContainer = document.getElementById(starsId);
    const rating = parseInt(starsContainer.getAttribute('data-rating') || '5');
    const text = document.getElementById(textareaId).value.trim();
    
    if (!text) {
        showNotification('‚ùå –ù–∞–ø–∏—à–∏—Ç–µ —Ç–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞');
        return;
    }
    
    if (addReview(productId, rating, text)) {
        const reviewForm = document.getElementById(`review-form-${productId}`);
        reviewForm.style.display = 'none';
        document.querySelector('.review-form-toggle').style.display = 'block';
        
        document.getElementById(textareaId).value = '';
        
        openProductModal(productId);
    }
}

// ========== –ê–î–ú–ò–ù-–ü–ê–ù–ï–õ–¨ ==========

const ADMIN_PASSWORD = 'admin123'; 
let logoClickCount = 0;
let logoClickTimer;

document.querySelector('.logo').addEventListener('click', function(e) {
    logoClickCount++;
    
    clearTimeout(logoClickTimer);
    logoClickTimer = setTimeout(() => {
        logoClickCount = 0;
    }, 2000);
    
    if (logoClickCount === 5) {
        const password = prompt('üîê –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:');
        if (password === ADMIN_PASSWORD) {
            openAdminPanel();
        } else {
            showNotification('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å');
        }
        logoClickCount = 0;
    }
});

function openAdminPanel() {
    if (!document.getElementById('adminModal')) {
        createAdminPanel();
    }
    document.getElementById('adminModal').classList.add('active');
    document.getElementById('adminLogin').style.display = 'flex';
    document.getElementById('adminContent').style.display = 'none';
}

function closeAdminPanel() {
    document.getElementById('adminModal').classList.remove('active');
}

function checkAdminPassword() {
    const password = document.getElementById('adminPassword').value;
    if (password === ADMIN_PASSWORD) {
        document.getElementById('adminLogin').style.display = 'none';
        document.getElementById('adminContent').style.display = 'block';
        renderAdminPanel();
    } else {
        showNotification('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!');
    }
}

function createAdminPanel() {
    const adminHTML = `
        <div id="adminModal" class="modal">
            <div class="modal-content" style="max-width: 800px;">
                <span class="close-modal" onclick="closeAdminPanel()">&times;</span>
                <h2>üëë –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞–º–∏</h2>
                
                <div id="adminLogin" class="admin-login">
                    <input type="password" id="adminPassword" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞">
                    <button class="btn btn-primary" onclick="checkAdminPassword()">–í–æ–π—Ç–∏</button>
                </div>
                
                <div id="adminContent" style="display: none;">
                    <div style="display: flex; gap: 15px; margin-bottom: 25px; justify-content: flex-end;">
    <button onclick="exportReviews()" style="background: var(--accent); color: white; border: none; padding: 10px 20px; border-radius: 40px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 8px;">
        üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç–∑—ã–≤—ã –≤ —Ñ–∞–π–ª
    </button>
    
    <label for="importReviews" style="background: var(--black); color: white; border: none; padding: 10px 20px; border-radius: 40px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 8px;">
        üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ—Ç–∑—ã–≤—ã –∏–∑ —Ñ–∞–π–ª–∞
        <input type="file" id="importReviews" accept=".json" style="display: none;" onchange="importReviews(event)">
    </label>
</div>
                    <div class="admin-stats">
                        <div class="admin-stat-item">
                            <div class="admin-stat-value" id="totalReviews">0</div>
                            <div class="admin-stat-label">–í—Å–µ–≥–æ –æ—Ç–∑—ã–≤–æ–≤</div>
                        </div>
                        <div class="admin-stat-item">
                            <div class="admin-stat-value" id="avgRating">0</div>
                            <div class="admin-stat-label">–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥</div>
                        </div>
                        <div class="admin-stat-item">
                            <div class="admin-stat-value" id="totalProducts">0</div>
                            <div class="admin-stat-label">–¢–æ–≤–∞—Ä–æ–≤</div>
                        </div>
                    </div>
                    
                    <div id="adminReviewsList" style="max-height: 400px; overflow-y: auto;"></div>
                </div>
            </div>
        </div>
    `;
    
    document.body.insertAdjacentHTML('beforeend', adminHTML);
    
    if (!document.getElementById('adminStyles')) {
        const style = document.createElement('style');
        style.id = 'adminStyles';
        style.textContent = `
            .admin-stats {
                display: flex;
                gap: 20px;
                margin-bottom: 20px;
                padding: 20px;
                background: var(--accent);
                color: white;
                border-radius: 16px;
            }
            .admin-stat-item {
                text-align: center;
                flex: 1;
            }
            .admin-stat-value {
                font-size: 32px;
                font-weight: 800;
            }
            .admin-stat-label {
                font-size: 14px;
                opacity: 0.9;
            }
            .admin-login {
                display: flex;
                flex-direction: column;
                gap: 15px;
                max-width: 300px;
                margin: 40px auto;
            }
            .admin-login input {
                padding: 12px;
                border: 1px solid #ddd;
                border-radius: 12px;
                font-size: 16px;
            }
            .admin-product-section {
                margin-bottom: 30px;
                border: 1px solid #eee;
                border-radius: 16px;
                padding: 20px;
            }
            .admin-product-title {
                font-size: 20px;
                font-weight: 700;
                margin-bottom: 15px;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
            .admin-review-item {
                background: #f5f5f7;
                border-radius: 12px;
                padding: 15px;
                margin-bottom: 15px;
            }
            .admin-review-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 10px;
            }
            .admin-review-actions {
                display: flex;
                gap: 10px;
            }
            .admin-review-actions button {
                background: none;
                border: none;
                font-size: 18px;
                cursor: pointer;
                padding: 5px 10px;
                border-radius: 8px;
                transition: 0.2s;
            }
            .admin-edit-btn:hover {
                background: #e0e0e0;
            }
            .admin-delete-btn:hover {
                background: #fee2e2;
                color: #dc2626;
            }
            .admin-hide-btn:hover {
                background: #e0e0e0;
            }
            
            /* –¢—ë–º–Ω–∞—è —Ç–µ–º–∞ */
            body.dark-theme .admin-product-section {
                border-color: #2a2a2a;
            }
            body.dark-theme .admin-review-item {
                background: #2a2a2a;
            }
            body.dark-theme .admin-login input {
                background: #2a2a2a;
                border-color: #3a3a3a;
                color: white;
            }
            
            body.dark-theme label[for="importReviews"] {
            background: #2a2a2a !important;
            color: white !important;
            }

            body.dark-theme label[for="importReviews"]:hover {
                background: #3a3a3a !important;
            }
        `;
        document.head.appendChild(style);
    }
}

function deleteReview(productId, reviewId) {
    if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –æ—Ç–∑—ã–≤ –Ω–∞–≤—Å–µ–≥–¥–∞?')) {
        const index = productReviews[productId].reviews.findIndex(r => r.id === reviewId);
        if (index !== -1) {
            productReviews[productId].reviews.splice(index, 1);
            updateAverageRating(productId);
            showNotification('‚úÖ –û—Ç–∑—ã–≤ —É–¥–∞–ª—ë–Ω');
            renderAdminPanel();
        }
    }
}


function exportReviews() {
    const dataStr = JSON.stringify(productReviews, null, 2);
    const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
    
    const exportFileDefaultName = `reviews_backup_${new Date().toISOString().slice(0,10)}.json`;
    
    const linkElement = document.createElement('a');
    linkElement.setAttribute('href', dataUri);
    linkElement.setAttribute('download', exportFileDefaultName);
    linkElement.click();
    
    showNotification('‚úÖ –û—Ç–∑—ã–≤—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ —Ñ–∞–π–ª');
}

function importReviews(event) {
    const file = event.target.files[0];
    if (!file) return;
    
    const reader = new FileReader();
    reader.onload = function(e) {
        try {
            const importedReviews = JSON.parse(e.target.result);
            
            if (typeof importedReviews === 'object' && importedReviews !== null) {
                Object.keys(importedReviews).forEach(productId => {
                    if (!productReviews[productId]) {
                        productReviews[productId] = importedReviews[productId];
                    } else {
                        const existingIds = new Set(productReviews[productId].reviews.map(r => r.id));
                        const newReviews = importedReviews[productId].reviews.filter(r => !existingIds.has(r.id));
                        productReviews[productId].reviews.push(...newReviews);
                        
                        updateAverageRating(parseInt(productId));
                    }
                });
                
                saveReviews();
                showNotification('‚úÖ –û—Ç–∑—ã–≤—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!');
                
                if (document.getElementById('adminContent').style.display === 'block') {
                    renderAdminPanel();
                }
            } else {
                showNotification('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞');
            }
        } catch (error) {
            showNotification('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–∞');
            console.error(error);
        }
    };
    reader.readAsText(file);
    
    event.target.value = '';
}

function renderAdminPanel() {
    let totalReviews = 0;
    let totalRating = 0;
    let ratingCount = 0;
    
    let html = '';
    
    products.forEach(product => {
        const reviews = productReviews[product.id]?.reviews || [];
        if (reviews.length > 0) {
            totalReviews += reviews.length;
            
            html += `
                <div class="admin-product-section">
                    <div class="admin-product-title">
                        <span>${product.name} (${reviews.length} –æ—Ç–∑—ã–≤–æ–≤)</span>
                        <span>‚≠ê ${productReviews[product.id]?.averageRating.toFixed(1) || 0}</span>
                    </div>
            `;
            
            reviews.forEach(review => {
                totalRating += review.rating;
                ratingCount++;
                
                html += `
                    <div class="admin-review-item">
                        <div class="admin-review-header">
                            <div>
                                <strong>${review.author}</strong> ‚Ä¢ ${review.date} ‚Ä¢ ‚≠ê ${review.rating}
                            </div>
                            <div class="admin-review-actions">
                                <button class="admin-delete-btn" onclick="deleteReview(${product.id}, ${review.id})" title="–£–¥–∞–ª–∏—Ç—å">üóëÔ∏è</button>
                            </div>
                        </div>
                        <div>${review.text}</div>
                        <div style="display:flex; gap:15px; margin-top:10px; font-size:12px; color:var(--gray);">
                            <span>üëç ${review.likes || 0}</span>
                            <span>üëé ${review.dislikes || 0}</span>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
        }
    });
    
    if (totalReviews === 0) {
        html = '<p style="text-align:center; padding:40px;">üò¥ –ü–æ–∫–∞ –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ –æ—Ç–∑—ã–≤–∞</p>';
    }
    
    document.getElementById('adminReviewsList').innerHTML = html;
    
    document.getElementById('totalReviews').textContent = totalReviews;
    document.getElementById('avgRating').textContent = ratingCount > 0 ? (totalRating / ratingCount).toFixed(1) : '0';
    document.getElementById('totalProducts').textContent = products.length;
}
</script>
</body>
</html>
